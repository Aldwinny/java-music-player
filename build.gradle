/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.5.1/userguide/tutorial_java_projects.html
 */


plugins {
    id 'java'
    id 'application'
    id 'com.github.onslip.gradle-one-jar' version '1.0.6'
}

configurations {
    fatJarBuild
}

task awesomeFunJar(type: OneJar) {
    mainClass = 'com.alds.music.player.App'
    archiveFileName = 'alds-music-player.jar'
    targetConfiguration = configurations.fatJarBuild
}

task fatJar(type: Jar) {
  manifest.from jar.manifest
  classifier = 'all'
  from {
    configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
  } {
    exclude "META-INF/*.SF"
    exclude "META-INF/*.DSA"
    exclude "META-INF/*.RSA"
  }
  with jar
}

repositories {
    mavenCentral()
}

dependencies {
    
    implementation 'commons-io:commons-io:2.6'
    testImplementation 'junit:junit:4.13'

    fatJarBuild 'commons-io:commons-io:2.6'
}

application {
    mainClassName = 'com.alds.music.player.App'
}

jar {
    manifest {
        attributes "Main-Class": "$application.mainClassName"
    }

    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
